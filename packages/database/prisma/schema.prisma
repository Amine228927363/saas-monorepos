generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id                  String             @id @default(cuid())
  email               String             @unique
  password            String             @db.Text()
  full_name           String?            @db.VarChar(255)
  create_at           DateTime           @default(now())
  updated_at          DateTime           @default(now()) @updatedAt
  contactid           Int?
  contact             ContactInfo?       @relation(fields: [contactid], references: [id])
  customer            Customer[]
  OnboardingProcess   OnboardingProcess? @relation(fields: [onboardingProcessId], references: [id])
  onboardingProcessId Int?

  @@index([email])
  @@map("users")
}

model Customer {
  id                  String             @id @default(cuid())
  name                String
  email               String             @unique
  status              String
  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt
  organizationId      String?
  organization        Organization?      @relation(fields: [organizationId], references: [id])
  onboardingProcessID Int?
  onboardingProcess   OnboardingProcess? @relation(fields: [onboardingProcessID], references: [id])
  TaskKeepBy          String?
  user                User?              @relation(fields: [TaskKeepBy], references: [id])
  tasks               Task[]
}

model Organization {
  id        String     @id @default(cuid())
  name      String
  email     String     @unique
  phone     String     @unique
  customers Customer[]
}

model ContactInfo {
  id        Int    @id @default(autoincrement())
  firstName String
  lastName  String
  email     String @unique
  phone     String @unique
  User      User[]
}

model OnboardingProcess {
  id       Int        @id @default(autoincrement())
  step     String
  customer Customer[]
  tasks    Task[]
  user     User[]
}

model Task {
  id          Int                @id @default(autoincrement())
  name        String
  description String?
  processId   Int?
  onboarding  OnboardingProcess? @relation(fields: [processId], references: [id])
  CustomerId  String?
  customer    Customer?          @relation(fields: [CustomerId], references: [id])
  status      Status             @default(ToDo)
  dueDate     DateTime
}

enum Status {
  ToDo
  InProgress
  Done
}
